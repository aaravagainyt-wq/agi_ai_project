<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Self-Learning AI</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

<div class="chat-container">
    <h1>ðŸ¤– AI Chat</h1>

    <div id="chat-box" class="chat-box"></div>

    <input id="user-input" type="text" placeholder="Say something...">
    <button onclick="sendMessage()">Send</button>
</div>

<script>
const BACKEND_URL = "https://YOUR-RENDER-URL.onrender.com";

let lastQuestion = "";

function addMessage(text, cls) {
    const box = document.getElementById("chat-box");
    const div = document.createElement("div");
    div.className = cls;
    div.innerText = text;
    box.appendChild(div);
    box.scrollTop = box.scrollHeight;
}

async function sendMessage() {
    const input = document.getElementById("user-input");
    const msg = input.value.trim();
    if (!msg) return;

    addMessage(msg, "user");
    input.value = "";
    lastQuestion = msg;

    const res = await fetch(`${BACKEND_URL}/chat`, {
        method: "POST",
        headers: {"Content-Type":"application/json"},
        body: JSON.stringify({ user_input: msg })
    });

    const data = await res.json();
    addMessage(data.answer, "bot");

    if (!data.found) {
        const teach = prompt("What should I answer next time?");
        if (teach) {
            await fetch(`${BACKEND_URL}/chat`, {
                method: "POST",
                headers: {"Content-Type":"application/json"},
                body: JSON.stringify({
                    user_input: lastQuestion,
                    teach_answer: teach
                })
            });
            addMessage("Learned âœ”", "bot");
        }
    }
}
</script>

</body>
</html>
